<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag/dist/css/multi-select-tag.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Expense Tracker - Analysis</title>
</head>
<body class="body">
 <div class="bg-nav d-flex flex-column flex-md-row align-items-center pb-0 mb-0 border-bottom">
  <h5 class="m-3 mr-md-auto font-weight-normal"><a href="/" style="text-decoration : none">Expense Tracker - {{ user_name }}</a></h5>

  <nav class="m-2 my-md-0 mr-md-3">
    <a class="py-2 m-2 text-dark" href="/home">Home</a>
    <a class="py-2 m-2 text-dark" href="/analysis">Analysis</a>
    <a class="py-2 m-2 text-dark" href="/profile">Profile</a>
    <a class="py-2 m-2 text-dark" href="/contact">Contact Us</a>
  </nav>
     <a class="btn m-2 btn-outline-warning" href="/logout">Logout</a>
</div>

 <div class="container">
     <div class="row my-3">
         <div class="col">

            <!-- Analysis Overview -->
            <hr>
            <div class="analysis-overview">
                <h3>Analysis Overview</h3>
                <p class="darker-font">This page provides a comprehensive overview of your spending habits. Each visualization is designed to highlight different aspects of your financial activity, allowing you to identify trends, patterns, and areas for improvement.</p>
            </div>

            <!-- Category: Expense Distribution -->
            <hr>
            <h3>Expense Distribution</h3>
            <div class="row">
                <!-- Expense Category Breakdown -->
                <div class="col-md-8 visualization-area">
                     <div class="goal-panel m-2">
                         <div id="pie" class="chart"></div>
                     </div>
                 </div>

                 <!-- Description for Expense Category Breakdown -->
                 <div class="col-md-4 description-area">
                     <h5>Expense Category Breakdown</h5>
                     <small>Percentage distribution of expenses across categories.</small>
                     <p class="darker-font">This chart shows how your expenses are divided among different categories (e.g., Spend, Earning, Investment, Saving).</p>
                 </div>
            </div>

            <div class="row">
                <!-- Spending by Category -->
                <div class="col-md-8 visualization-area">
                     <div class="goal-panel m-2">
                         <div id="stack_bar" class="chart"></div>
                     </div>
                 </div>

                 <!-- Description for Spending by Category -->
                 <div class="col-md-4 description-area">
                     <h5>Spending by Category</h5>
                     <small>Amount spent for each category.</small>
                     <p class="darker-font">This chart displays the total amount spent in each expense category. It helps you identify which specific areas consume the most of your funds.</p>
                 </div>
            </div>

            <!-- Category: Time-Based Analysis -->
            <hr>
            <h3>Time-Based Analysis</h3>
            <div class="row">
                <!-- Expense Trend Over Time -->
                <div class="col-md-8 visualization-area">
                     <div class="goal-panel m-2">
                         <div id="line" class="graph"></div>
                     </div>
                 </div>

                 <!-- Description for Expense Trend Over Time -->
                 <div class="col-md-4 description-area">
                     <h5>Expense Trend Over Time</h5>
                     <small>How expenses change over time.</small>
                     <p class="darker-font">This chart visualizes the trend of your expenses over time. Rising trends indicate increasing expenses, while declining trends suggest reduced spending.</p>
                 </div>
            </div>

            <div class="row">
                <!-- Monthly Spending Summary -->
                <div class="col-md-8 visualization-area">
                     <div class="goal-panel m-2">
                         <div id="month_bar" class="chart"></div>
                     </div>
                 </div>

                 <!-- Description for Monthly Spending Summary -->
                 <div class="col-md-4 description-area">
                     <h5>Monthly Spending Summary</h5>
                     <small>Total expenses for each month.</small>
                     <p class="darker-font">This chart summarizes your total expenses for each month, allowing you to compare spending patterns across different months.</p>
                 </div>
            </div>

            <!-- Category: Detailed Breakdown -->
            <hr>
            <h3>Detailed Breakdown</h3>
            <div class="row">
                <!-- Detailed Expense Allocation -->
                <div class="col-md-8 visualization-area">
                     <div class="goal-panel m-2">
                         <div id="sun" class="chart"></div>
                     </div>
                 </div>

                 <!-- Description for Detailed Expense Allocation -->
                 <div class="col-md-4 description-area">
                     <h5>Detailed Expense Allocation</h5>
                     <small>Hierarchical breakdown of expenses.</small>
                     <p class="darker-font">This chart provides a detailed, hierarchical view of your expenses, breaking them down into categories and subcategories.</p>
                 </div>
            </div>

            <div class="row">
                <!-- Transaction Count Heatmap -->
                <div class="col-md-8 visualization-area">
                     <div class="goal-panel m-2">
                         <div id="heat" class="chart"></div>
                     </div>
                 </div>

                 <!-- Description for Transaction Count Heatmap -->
                 <div class="col-md-4 description-area">
                     <h5>Transaction Count Heatmap</h5>
                     <small>Transaction count for each day over the month.</small>
                     <p class="darker-font">This chart shows the distribution of your transactions over days and months. It helps identify patterns in your spending habits.</p>
                 </div>
            </div>

            <!-- Category: Other -->
            <hr>
            <h3>Other</h3>
            <div class="row">
                <!-- Spending Over Time -->
                <div class="col-md-8 visualization-area">
                     <div class="goal-panel text-center m-2">
                         <div id="scatter" class="chart"></div>
                     </div>
                 </div>

                 <!-- Description for Spending Over Time -->
                 <div class="col-md-4 description-area">
                     <h5>Spending Over Time</h5>
                     <small>This chart shows the relation of amount over time</small>
                     <p class="darker-font">This chart shows the relation of amount over time.</p>
                 </div>
            </div>
         </div>
     </div>
 </div>


<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
 <script src='https://cdn.plot.ly/plotly-2.16.1.min.js'></script>
 <script src='https://cdn.plot.ly/plotly-latest.min.js'></script> <!-- Plotly CDN -->
 <script src="{{ url_for('static', filename='js/script.js') }}"></script> <!-- Local JS -->
 <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
 <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag/dist/js/multi-select-tag.js"></script>
</body>
<script type='text/javascript'>
  var bar = {{bar | safe}};
  var pie = {{pie | safe}};
  var line_graph = {{line | safe}};
  var scatter_graph = {{scatter | safe}};
  var heat_graph = {{heat | safe}};
  var month_graph = {{month_bar | safe}};
  var sun_graph = {{sun | safe}};

<!--Plotly.plot('div_id',data,{});-->
  Plotly.plot('pie',pie,{});
  Plotly.plot('stack_bar',bar,{});
  Plotly.plot('line',line_graph,{});
  Plotly.plot('scatter',scatter_graph,{});
  Plotly.plot('heat',heat_graph,{});
  Plotly.plot('month_bar',month_graph,{});
  Plotly.plot('sun',sun_graph,{});

</script>
</html>